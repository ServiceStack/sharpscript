<div class="gfm"><div class="highlight highlight-text-html-handlebars"><pre><span class="pl-c"><span class="pl-c">&lt;!--</span></span>
<span class="pl-c">db sqlserver</span>
<span class="pl-c">db.connection $AZURE_SQL_CONNECTION_STRING</span>
<span class="pl-c">files azure</span>
<span class="pl-c">files.config {ConnectionString:$AZURE_BLOB_CONNECTION_STRING,ContainerName:rockwind}</span>
<span class="pl-c"><span class="pl-c">--&gt;</span></span>

<span class="pl-c1">{{</span> <span class="pl-v">dbTableNamesWithRowCounts</span> | <span class="pl-e"><span class="pl-v">textDump</span></span>({ <span class="pl-e"><span class="pl-v">caption</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Tables<span class="pl-pds">'</span></span> }) <span class="pl-c1">}}</span>

<span class="pl-c1">{{</span> `<span class="pl-e"><span class="pl-v">SELECT</span></span> <span class="pl-s"><span class="pl-pds">"</span>Id<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>CustomerId<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>EmployeeId<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>OrderDate<span class="pl-pds">"</span></span> <span class="pl-e"><span class="pl-v">from</span></span> <span class="pl-s"><span class="pl-pds">"</span>Order<span class="pl-pds">"</span></span> <span class="pl-e"><span class="pl-v">ORDER</span></span> <span class="pl-e"><span class="pl-v">BY</span></span> <span class="pl-s"><span class="pl-pds">"</span>Id<span class="pl-pds">"</span></span> <span class="pl-e"><span class="pl-v">DESC</span></span> ${<span class="pl-e"><span class="pl-v">sqlLimit</span></span>(<span class="pl-e"><span class="pl-v">5</span></span>)}`
   | <span class="pl-e"><span class="pl-v">dbSelect</span></span> | <span class="pl-e"><span class="pl-v">textDump</span></span>({ <span class="pl-e"><span class="pl-v">caption</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Last 5 Orders<span class="pl-pds">'</span></span>, <span class="pl-e"><span class="pl-v">headerStyle</span></span>:<span class="pl-s"><span class="pl-pds">'</span>None<span class="pl-pds">'</span></span> }) <span class="pl-c1">}}</span>

<span class="pl-c1">{{</span> <span class="pl-v">contentAllRootDirectories</span> | <span class="pl-e"><span class="pl-v">map</span></span> =&gt; `${<span class="pl-e"><span class="pl-v">it.Name</span></span>}/` 
   | <span class="pl-e"><span class="pl-v">union</span></span>(<span class="pl-e"><span class="pl-v">map</span></span>(<span class="pl-e"><span class="pl-v">contentAllRootFiles</span></span>, <span class="pl-e"><span class="pl-v">x</span></span> =&gt; <span class="pl-e"><span class="pl-v">x.Name</span></span>))
   | <span class="pl-e"><span class="pl-v">textDump</span></span>({ <span class="pl-e"><span class="pl-v">caption</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Root Files and Folders<span class="pl-pds">'</span></span> }) <span class="pl-c1">}}</span>

<span class="pl-c1">{{</span> <span class="pl-v">find</span> ?? <span class="pl-s"><span class="pl-pds">'</span>*.html<span class="pl-pds">'</span></span> | <span class="pl-e"><span class="pl-v">assignTo</span></span>: <span class="pl-e"><span class="pl-v">find</span></span> <span class="pl-c1">}}</span>
<span class="pl-c1">{{</span> <span class="pl-v">find</span> | <span class="pl-e"><span class="pl-v">contentFilesFind</span></span> | <span class="pl-e"><span class="pl-v">map</span></span> =&gt; <span class="pl-e"><span class="pl-v">it.VirtualPath</span></span> | <span class="pl-e"><span class="pl-v">take</span></span>(<span class="pl-e"><span class="pl-v">5</span></span>) 
   | <span class="pl-e"><span class="pl-v">textDump</span></span>({ <span class="pl-e"><span class="pl-v">caption</span></span>: `<span class="pl-e"><span class="pl-v">Files</span></span> <span class="pl-e"><span class="pl-v">matching</span></span>: ${<span class="pl-e"><span class="pl-v">find</span></span>}` }) <span class="pl-c1">}}</span></pre></div>
</div>